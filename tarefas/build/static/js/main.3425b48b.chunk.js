(this.webpackJsonptarefas=this.webpackJsonptarefas||[]).push([[0],{17:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var i=a(2),n=a.n(i),c=a(25),o=a.n(c),r=(a(17),a(18)),s=a(5),l=a(11),d=a.n(l),u=a(14),v=a(27),h=a(16),m=(a(33),a(35),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ID});h.a.initializeApp(m);var p=h.a.auth(),f=h.a.database(),j=a(1),O=Object(i.createContext)({});function x(e){var t=Object(i.useState)(),a=Object(v.a)(t,2),n=a[0],c=a[1],o=Object(s.f)();function r(){return(r=Object(u.a)(d.a.mark((function e(){var t,a,i,n,r,s,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.GoogleAuthProvider,e.next=3,p.signInWithPopup(t);case 3:(a=e.sent).user&&(i=a.user,n=i.uid,r=i.displayName,s=i.photoURL,l=i.email,c({id:n,name:String(r),avatar:String(s),email:String(l)}),o.push("/home"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e=p.onAuthStateChanged((function(e){if(e){var t=e.displayName,a=e.photoURL,i=e.uid,n=e.email;c({name:String(t),avatar:String(a),id:i,email:String(n)})}p.setPersistence(h.a.auth.Auth.Persistence.SESSION)}));return function(){e()}}),[]),Object(j.jsx)(O.Provider,{value:{user:n,signWithGoogle:function(){return r.apply(this,arguments)}},children:e.children})}var T=function(e){return sessionStorage.key(0)==="firebase:authUser:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,":[DEFAULT]")||(window.location.href="/"),Object(j.jsx)(s.a,{path:e.path,exact:e.exact,component:e.component})},S=(a(47),{tarefa:"",prio:"",motivo:"",time:"",timePrev:"",team:"",stats:"",date:"",solicitante:"",text:"",usuario:"a"});function _(){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(d.a.mark((function e(){var t,a,i,n,c,o,r,s,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=p.currentUser,S.usuario="".concat(t?t.displayName:"a"),a=Date(),i=a.split(" "),n="".concat(i[2],"/").concat(i[1],"/").concat(i[3]," as ").concat(i[4]),c=["","","","","","",""],o=f.ref("Tarefas").push(),r=document.getElementsByTagName("select")[0],s=document.getElementsByTagName("textarea")[0],l=0;l<=6;l++)(u=document.getElementsByTagName("input")[l]).value&&(c[l]=u.value.toUpperCase()),S.tarefa=c[0],S.prio=c[1],S.solicitante=c[2],S.motivo=c[3],S.time=c[4],S.timePrev=c[5],S.team=c[6];c.push(r.value),c.push(s.value),c.push(n),S.stats=c[7],S.text=c[8],S.date=c[9],o.set({tarefa:S.tarefa,prio:S.prio,motivo:S.motivo,time:S.time,timePrev:S.timePrev,team:S.team,stats:S.stats,date:S.date,solicitante:S.solicitante,text:S.text,usuarioCriador:S.usuario}).then((function(){return window.location.href="/ver-tarefas"}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(48);var E=a.p+"static/media/logout.d95c3747.svg";function P(){return Object(j.jsx)("header",{className:"cabecalho",children:Object(j.jsxs)("div",{className:"rotaitems",children:[Object(j.jsx)("div",{onClick:function(){window.location.href="/add-tarefa"},id:"divRoute",className:"routeItens",children:"Adicionar Tarefas"}),Object(j.jsx)("a",{href:"/ver-tarefas",className:"routeItens",children:"Visualizar Tarefas"}),Object(j.jsx)("a",{href:"/historico-de-tarefas",className:"routeItens",children:"Hist\xf3rico de Tarefas"}),Object(j.jsx)("button",{onClick:function(){p.signOut(),window.location.href="/"},children:Object(j.jsx)("img",{src:E,alt:"Sair do sistema"})})]})})}function g(){return Object(j.jsxs)("main",{id:"addarea",children:[Object(j.jsx)(P,{}),Object(j.jsx)("h2",{children:"Preencher formul\xe1rio para adicionar tarefas"}),Object(j.jsxs)("form",{className:"formAddMassive",children:[Object(j.jsx)("input",{type:"text",placeholder:"Tarefa",maxLength:12}),Object(j.jsx)("input",{type:"number",placeholder:"Prioridade",min:0,max:2,maxLength:1}),Object(j.jsx)("input",{type:"text",placeholder:"Solicitante"}),Object(j.jsx)("input",{type:"text",placeholder:"Motivo"}),Object(j.jsx)("input",{type:"text",placeholder:"Horario de Inicio"}),Object(j.jsx)("input",{type:"text",placeholder:"Tempo de previs\xe3o"}),Object(j.jsx)("input",{type:"text",placeholder:"Equipe responsav\xe9l pela tarefa"}),Object(j.jsx)("textarea",{maxLength:114}),Object(j.jsxs)("select",{className:"statusItems",children:[Object(j.jsx)("option",{value:"Abertura",children:"Iniciada"}),Object(j.jsx)("option",{value:"Equipe deslocada",children:"Tarefa em Andamento"}),Object(j.jsx)("option",{value:"Equipe na regi\xe3o",children:"Tarefa em Revis\xe3o "})]}),Object(j.jsx)("button",{type:"button",id:"createButton",onClick:_,className:"addButton",children:"Adicionar"})]})]})}a(49);var A=n.a.forwardRef((function(){var e=Object(i.useRef)(null);return Object(j.jsx)("div",{id:"list-area",ref:e,className:"list-area"})}));function y(){return function(){var e=f.ref("Tarefas"),t={tarefa:"",solicitante:"",team:"",time:"",timePrev:"",prio:"",status:"",key:"",date:"",motivo:"",text:""};e.on("child_added",(function(e){var a=document.querySelector("div#list-area"),i=(t={tarefa:e.child("tarefa").val(),solicitante:e.child("solicitante").val(),team:e.child("team").val(),time:e.child("time").val(),timePrev:e.child("timePrev").val(),prio:e.child("prio").val(),status:e.child("stats").val(),date:e.child("date").val(),key:String(e.key),motivo:e.child("motivo").val(),text:e.child("text").val()}).key.substring(1);"list-area"===(null===a||void 0===a?void 0:a.id)&&(a.innerHTML+='\n      <div class="dataItems" id="'.concat(i,'">\n      <span class="incidenteText">').concat(t.tarefa," / ").concat(t.solicitante,"</span>\n        <ul>\n        <li>").concat(t.motivo,"</li>\n        <li>Ocorrido as ").concat(t.time," e o tempo de previs\xe3o ").concat(t.timePrev,"</li>\n        <li>").concat(t.team," responsaveis pela tarefa</li>\n        <li>Abertura no dia ").concat(t.date,'</li>\n        </ul>\n      <textarea  id="').concat(i,'" class="areatexto" >').concat(t.text,'</textarea>\n      <select class="status"  id="').concat(i,'">\n        <option>').concat(t.status,'</option>\n        <option value="Tarefa Iniciada">Tarefa Iniciada</option>\n        <option value="Tarefa em Andamento">Tarefa em Andamento</option>\n        <option value="Tarefa em revis\xe3o">Tarefa em revis\xe3o</option>\n        <option value="Encerramento">Encerramento</option>\n      </select>\n      </div> '))})),e.once("child_added",(function(a){var i=document.querySelector("div#list-area");if(t={tarefa:a.child("tarefa").val(),motivo:a.child("motivo").val(),team:a.child("team").val(),time:a.child("time").val(),timePrev:a.child("timePrev").val(),prio:a.child("prio").val(),status:a.child("stats").val(),date:a.child("date").val(),solicitante:a.child("solicitante").val(),key:String(a.key),text:a.child("text").val()},i){var n=document.querySelector("select#".concat(t.key.substring(1))),c=document.querySelector("textarea#".concat(t.key.substring(1)));null===c||void 0===c||c.addEventListener("click",(function(){var e,t=null===(e=c.parentElement)||void 0===e?void 0:e.getElementsByTagName("textarea")[0];null===t||void 0===t||t.addEventListener("change",(function(){f.ref("Tarefas").child("-".concat(t.id)).update({text:t.value}).finally((function(){return window.location.href="/ver-tarefas"}))}))})),null===n||void 0===n||n.addEventListener("change",(function(){var t,i=n.id,c=null===(t=n.parentElement)||void 0===t?void 0:t.getElementsByTagName("select")[0];"Encerramento"!==(null===c||void 0===c?void 0:c.value)?e.child("-".concat(i)).update({stats:null===c||void 0===c?void 0:c.value}):e.child("-".concat(i)).get().then((function(e){var t,i={tarefa:a.child("tarefa").val(),motivo:a.child("motivo").val(),team:a.child("team").val(),time:a.child("time").val(),timePrev:a.child("timePrev").val(),prio:a.child("prio").val(),status:a.child("stats").val(),date:a.child("date").val(),solicitante:a.child("solicitante").val(),key:String(a.key),text:a.child("text").val(),usuarioCriador:e.child("usuarioCriador").val(),user:null===(t=p.currentUser)||void 0===t?void 0:t.displayName};f.ref("History").child(i.prio).push().set(i)})).finally((function(){e.child("-".concat(i)).remove()})),window.location.href="/ver-tarefas"}))}}))}(),f.ref("Tarefas").on("child_removed",(function(e){if(e.key){var t=e.key.substring(1),a=document.querySelector("div#".concat(t));a&&a.remove()}})),f.ref("Incidentes").on("child_changed",(function(){window.location.reload()})),Object(j.jsxs)("div",{id:"main",children:[Object(j.jsx)(P,{}),Object(j.jsx)("div",{id:"view-area",children:Object(j.jsx)(A,{})})]})}a(50);function C(){return Object(j.jsxs)("div",{id:"home",children:[Object(j.jsx)("div",{id:"titulo",children:"Home de Tarefas"}),Object(j.jsxs)("div",{id:"routeDiv",children:[Object(j.jsx)("div",{id:"divRoute",onClick:function(){window.location.href="/add-tarefa"},className:"routeItens",children:"Adicionar Tarefas"}),Object(j.jsx)("a",{href:"/ver-tarefas",className:"routeItens",children:"Visualizar Tarefas"}),Object(j.jsx)("a",{href:"/historico-de-tarefas",className:"routeItens",children:"Hist\xf3rico de Tarefas"})]})]})}var R=a.p+"static/media/googleicon.df15d8e5.svg";a(51);function N(){var e=Object(i.useContext)(O),t=e.user,a=e.signWithGoogle;function n(){return(n=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,a();case 3:t&&(window.location.href="/home");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsx)("div",{className:"login",children:Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"areabutton",children:[Object(j.jsx)("h2",{children:"Fa\xe7a login para continuar"}),Object(j.jsxs)("button",{className:"loginButton",onClick:function(){return n.apply(this,arguments)},children:[Object(j.jsx)("img",{src:R,alt:"google icone"}),"Entre o Google"]})]})})})}a(52);function D(){return Object(j.jsxs)("div",{id:"mainarea",children:[Object(j.jsx)(P,{}),Object(j.jsx)("h1",{children:"Hist\xf3rico de Tarefas"}),Object(j.jsxs)("select",{id:"filter",onChange:function(){var e=document.getElementsByTagName("select")[0],t=f.ref("History").child("".concat(e.value)),a=document.querySelector("div#history");a&&(a.innerHTML=""),t.on("child_added",(function(t){var i={tarefa:t.child("tarefa").val(),motivo:t.child("motivo").val(),team:t.child("team").val(),time:t.child("time").val(),timePrev:t.child("timePrev").val(),prio:t.child("prio").val(),status:t.child("stats").val(),date:t.child("date").val(),solicitante:t.child("solicitante").val(),text:t.child("text").val(),user:t.child("user").val(),key:String(t.key)};if("history"===(null===a||void 0===a?void 0:a.id)){var n=i.key.substring(1);if(""===e.value)return a.innerHTML="",!0;a.innerHTML+='\n              <div class="dataItems" id="'.concat(n,'">\n                <span class="incidenteText">').concat(i.tarefa,"/ ").concat(i.prio," - ").concat(i.solicitante,"</span>\n                <ul>\n                <li>").concat(i.motivo,"</li>\n                <li>Ocorrido as ").concat(i.time," e o tempo de previs\xe3o ").concat(i.timePrev,"</li>\n                <li>").concat(i.team," responsaveis pela tarefa</li>\n                <li>Estado atual de encerramento por ").concat(i.user,"</li>\n                <li>Aberto em ").concat(i.date,'</li>\n                </ul>\n                <p id="areatexto">').concat(i.text,"</p>\n              </div>\n              ")}}))},children:[Object(j.jsx)("option",{}),Object(j.jsx)("option",{children:"0"}),Object(j.jsx)("option",{children:"1"}),Object(j.jsx)("option",{children:"2"})]}),Object(j.jsx)("div",{id:"history",className:"history-area"})]})}function H(){return Object(j.jsx)(r.a,{children:Object(j.jsx)(x,{children:Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{path:"/",exact:!0,component:N}),Object(j.jsx)(T,{path:"/home",exact:!1,component:C}),Object(j.jsx)(T,{path:"/add-tarefa",exact:!1,component:g}),Object(j.jsx)(T,{path:"/ver-tarefas",exact:!1,component:y}),Object(j.jsx)(T,{path:"/historico-de-tarefas",exact:!1,component:D})]})})})}o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(H,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.3425b48b.chunk.js.map